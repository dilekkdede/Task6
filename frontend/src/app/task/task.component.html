<p-toast/>
<div class="header">
  TASKS
  <p-button [style]="{
    padding: '0.75rem 3rem',
    fontSize: '3rem',
    border: '2px solid #2196F3'
  }" icon="pi pi-plus" title="add task" [rounded]="false" [text]="true" (click)="showDialog()" severity="info"/>


  <p-select [options]="statusList" [(ngModel)]="selectedStatus" optionLabel="name" [showClear]="true"
            placeholder="Durum seçiniz" class="w-full md:w-56"/>

  <p-button [style]="{
    padding: '0.75rem 6rem',
    fontSize: '3rem',
    border: '2px solid #2196F3'
  }" title="Sorgula" [rounded]="false" [text]="true" (click)="sorgula()" severity="info">Sorgula
  </p-button>


  <p-dialog header="Add Task" [modal]="true" [(visible)]="visible"
            [style]="{ width: '40rem', height: '32rem',color:'blue' }">
    <br/>
    <div>
      <p-floatlabel>
        <input [style]="{ width: '100%', height: '4rem', fontSize: '2.0rem'}" id="Title" pInputText
               [(ngModel)]="title"/>
        <label for="Title">Title</label>
      </p-floatlabel>
    </div>
    <br/>
    <div>
      <p-floatlabel>
        <p-dropdown
          [options]="categories"
          [(ngModel)]="categoryId"
          optionLabel="name"
          optionValue="id"
          placeholder="Kategori seç"
          [style]="{ width: '100%' }"
        ></p-dropdown>

      </p-floatlabel>
    </div>
    <br/>
    <div>
      <p-floatlabel>
        <input [style]="{ width: '100%',height: '4rem',fontSize: '2.0rem' }" id="DueDate" pInputText
               [(ngModel)]="dueDate"/>
        <label for="DueDate">Due Date</label>
      </p-floatlabel>
    </div>
    <div style="float:right;">
      <p-button label="İPTAL" severity="secondary" (onClick)="cancel()"/>
      <p-button *ngIf="!isEditButton" [style]="{ margin:'2rem'}" (onClick)="saveTask() ">KAYDET</p-button>
      <p-button *ngIf="isEditButton" [style]="{ margin:'2rem'}" (onClick)="updateTask()"> GÜNCELLE</p-button>

    </div>
  </p-dialog>
</div>

<div class="tablo">

  <p-scrollpanel [style]="{ width: '100%', height: '550px' }" >

  <p-table
    [value]="tasks"
    [paginator]="true"
    [rows]="8"
    [tableStyle]="{ 'min-width': '100rem' }"
    [rowsPerPageOptions]="[2, 4, 8]"
  >
    <ng-template #header>
      <tr>
        <th style="width:25%">İD</th>
        <th style="width:25%">Title</th>
        <th style="width:25%">Status</th>
        <th style="width:25%">DueDate</th>
        <th style="width:25%">Category</th>

      </tr>
    </ng-template>
    <ng-template #body let-task>
      <tr>
        <td>{{ task.id }}</td>
        <td>{{ task.title }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.dueDate }}</td>
        <td>{{ task.category?.name }}</td>


        <td style="padding-left: 3px; padding-right:5px">
          <p-button icon="pi pi-trash" (click)="deleteTask(task)" severity="danger"
                    rounded title="Sil"/>
        </td>

        <td>
          <p-button icon="pi pi-pencil" (click)="editTask(task)" severity="info" rounded
                    title="Düzenle"/>
        </td>


      </tr>
    </ng-template>
  </p-table>
  </p-scrollpanel>

</div>
